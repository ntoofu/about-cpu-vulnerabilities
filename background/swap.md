# Swapの仕組み

* 仮想記憶において, 通常通りメモリ上に存在するデータと, 補助記憶装置に退避(swap)したデータは透過的にアクセス出来る
  * どちらも仮想アドレスが振られており, プログラムはそのアドレスを用いて同じようにアクセスするだけ
* CPUは補助記憶に退避されたデータに対応する仮想アドレスにアクセスした際, page faultという例外を起こす
  * 補助記憶装置の何処かに退避されたデータを取ってくるような複雑なことをCPUが直接行うことは出来ない
  * メモリ上に無いということが分かると, 例外を起こしてkernelに委ねる
    * CPUはpage tableの各エントリに存在する `present` フラグによりメモリ上に存在するかどうかを判別する
* 結果的にkernelの処理に遷移し, その中で退避したデータをメモリ上に戻す(page in)
