# CPUマイクロコード

* CPUの命令セットには設計方針に基づいた分類がある
  * CISC = 多種多様で, 高機能な命令たち(1つの命令で色々できる)
    * ユーザーから見えるアセンブラコードは少なくなるかもしれないが, CPU設計は大変
    * 1命令に費やすクロック数が相対的に多いため, 命令数が少なくとも同一の処理を早く出来るというわけでもない
    * x86 は CISC に位置付けられる
  * RISC = シンプルな命令に限定した命令セット
    * ユーザーから見えるアセンブラコードはやや冗長になりうるが, CPU設計はしやすい
* 実際にはCISC的な複雑な命令を, CPU内部ではより小粒のRISC的な命令セットに変換してから処理していたりする
  * この, "ユーザーに見えるCISC的な命令" に対応する "CPU内部のRISC的な命令列" = microcode
* microcodeは昔はRead-onlyにかかれていたが, 今はその一部をCPU内の揮発性記憶領域に保持させることができるようになっていたりする
  * BIOS/UEFIからロードすることも出来るし, OSがブート中にロードさせることも出来る
  * 大幅な変更が困難な開発工程の終盤や, 今回のようにリリース後に, CPUの動作に不具合が見つかった場合の修正手段として用いられる
* ([この論文](https://www.syssec.rub.de/media/emma/veroeffentlichungen/2017/08/16/usenix17-microcode.pdf)が色々書いてあって面白かった)
